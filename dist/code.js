(()=>{"use strict";figma.showUI(__html__,{themeColors:!0,width:382,height:404}),void 0!==figma.currentPage.selection[0]&&"FRAME"===figma.currentPage.selection[0].type||(figma.notify("Please select a frame to run the plugin",{timeout:4e3,error:!0}),figma.closePlugin()),figma.ui.onmessage=e=>{if("insertGraph"===e.type&&void 0!==figma.currentPage.selection[0]){const t=figma.currentPage.selection[0];null!=e.coordinatesArray&&0!=e.coordinatesArray.length||figma.notify("Expression cannot be parsed. Please try again",{timeout:4e3,error:!0});const i=t.width/100,r=e.coordinatesArray.map((e=>({x:e.x*i,y:e.y*i}))),o=.2;let a=[],n=0,s=0;for(const e in r){const t=r[e].y;s+=1,t<0?n+=1:t>0&&(n-=1)}a=n===s-1?r.filter((e=>e.y>=-t.height)):n===1-s?r.filter((e=>e.y<=t.height)):r.filter((e=>Math.abs(e.y)<=t.height/2));const l=[];for(let e=1;e<a.length-1;e++){const t=a[e-1].x-a[e+1].x,i=a[e-1].y-a[e+1].y,r={x:a[e].x-t*o,y:a[e].y-i*o},n={x:a[e].x+t*o,y:a[e].y+i*o};l[e]=[],l[e].push(r),l[e].push(n)}let g=`M ${a[0].x} ${a[0].y} Q ${l[1][1].x} ${l[1][1].y} ${a[1].x} ${a[1].y}`;if(a.length>2){for(let e=1;e<a.length-2;e++)g+=` C ${l[e][0].x} ${l[e][0].y} ${l[e+1][1].x} ${l[e+1][1].y} ${a[e+1].x} ${a[e+1].y}`;const e=a.length-1;g+=` Q ${l[e-1][0].x} ${l[e-1][0].y} ${a[e].x} ${a[e].y}`}const h=figma.createVector();h.name="Vector "+e.userExpression,h.vectorPaths=[{windingRule:"NONE",data:g}],h.handleMirroring="ANGLE_AND_LENGTH",h.lockAspectRatio(),"FRAME"===t.type&&(t.appendChild(h),h.x=Math.round((t.width-h.width)/2),h.y=Math.round((t.height-h.height)/2)),figma.notify("Graph successfully inserted",{timeout:4e3,error:!1}),figma.closePlugin()}else figma.notify("Please keep a frame selected to insert a graph",{timeout:4e3,error:!0})}})();